plugins {
    id 'java'
    id 'application'
    id 'idea'
}

repositories {
    jcenter()
    mavenCentral()
}

sourceSets {
    defaultTest {
        java {
            compileClasspath += main.output + test.output
            runtimeClasspath += main.output + test.output
            srcDir file('src/test/java')
        }
        resources.srcDir file('src/test/resources')
    }
}

configurations {
    defaultTestCompile.extendsFrom testCompile
    defaultTestImplementation.extendsFrom testImplementation
    defaultTestRuntime.extendsFrom testRuntime
}

task defaultTest(type: Test) {
    testClassesDirs = sourceSets.defaultTest.output.classesDirs
    classpath = sourceSets.defaultTest.runtimeClasspath
}
test.dependsOn defaultTest

defaultTest {
    useJUnitPlatform()
}

dependencies {
    testImplementation "org.junit.jupiter:junit-jupiter:5.9.0"
    testCompile "org.mockito:mockito-core:4.8.0"
    testCompile "org.assertj:assertj-core:3.23.1"
    testImplementation 'junit:junit:4.13.2'
}

mainClassName = 'main.chess.Main'